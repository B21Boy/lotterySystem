<!DOCTYPE html>
<html>
<head>
    <title>User Lottery</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="bg-lights">
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="light"></span>
    <span class="moving-object"></span>
</div>

<div class="card">
    <h1>ðŸŽ« Play Lottery</h1>

    <div class="section-title">Current Lottery</div>
    <p id="roundName">Loading...</p>
    <p id="ticketPrice"></p>
    <p id="statusText"></p>
    <!-- Countdown display and Live button -->
    <div style="margin-top:12px;text-align:center;">
        <div id="countdownTimer" style="font-weight:700;font-size:16px;color:#00ff66;margin-bottom:8px;">--:--:--</div>
        <button id="liveBtn" style="max-width:200px;margin:0 auto;">Go Live</button>
    </div>

    <hr>

    <div class="section-title">Buy Ticket</div>
    <div class="input-group">
        <input id="username" placeholder=" ">
        <label for="username">Your Name</label>
    </div>
        <!-- Phone number input -->
        <div class="input-group">
            <input id="phone" type="tel" pattern="[0-9]{10,15}" placeholder=" ">
            <label for="phone">Phone Number</label>
        </div>
    <div class="input-group">
        <input id="number" type="number" min="0" max="99" placeholder=" ">
        <label for="number">Pick a number (0-99)</label>
    </div>
        <!-- Image input with camera support -->
        <!-- Image dropzone styled as textarea with preview -->
        <div class="input-group" id="imageDropzone">
            <label for="userImage" style="top:0;left:0;transform:none;position:static;background:transparent;font-size:15px;color:#00ff66;">Your Image (Camera or File)</label>
            <div id="dropzoneArea" tabindex="0">
                <span id="dropzoneText">Click or drag image here</span>
                <img id="imagePreview" style="display:none;max-width:100%;max-height:120px;border-radius:8px;margin-top:8px;" />
            </div>
            <input id="userImage" type="file" accept="image/*" capture="environment" style="display:none;">
        </div>
    <button onclick="buyTicket()">Buy Ticket</button>
    <p id="buyMessage"></p>

    <hr>

    <div class="section-title">Results</div>
    <p id="winningNum">Not announced yet</p>

    <hr>

    <div class="section-title">Publish Video (optional)</div>
    <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
        <button id="publishBtn" type="button">Start Publishing</button>
        <video id="publishPreview" autoplay muted playsinline style="width:120px;height:90px;border-radius:8px;background:#000;object-fit:cover;display:none;"></video>
    </div>

    <hr>

    <div class="section-title">History</div>
    <button onclick="loadHistory()">Show My Tickets</button>
    <pre id="historyList"></pre>

</div>


<script src="user.js"></script>
</body>
</html>
